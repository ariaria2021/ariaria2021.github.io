---
title: "タワーディフェンスの進化：ステージ制、グリッドスナップ、そして究極のモバイル対応"
description: "「無限に続く」ゲームから「攻略しがいのある」ゲームへ。Canvas API製のタワーディフェンスにステージ制や敵の多様化を導入し、さらにiPhone/iPadでも完璧に動作するように魔改造した全記録です。"
date: 2026-02-06
tags: ["TypeScript", "Canvas", "ResponsiveUI", "GameDev"]
---

昨日「とりあえず動く」状態になったタワーディフェンスゲームですが、今日は一日かけて「ゲームとしての面白さ」と「触り心地」を徹底的に磨き上げました。

[最新版をプレイする](https://ariaria2021.github.io/canvas-tower-defense/)

## アップデート内容

### 1. ステージクリア制の導入
無限に敵が出てくるのも楽しいですが、やはり「クリアした！」という達成感が欲しくてステージ制に変更しました。
一定数の敵を倒すと「STAGE CLEAR!」の画面が表示され、次のステージへ進めます。ステージが進むごとに敵の質が上がり、タワーの配置を考え直す必要が出てきます。

### 2. 「吸い付く」タワー設置（グリッドスナップ）
背景のマス目に合わせ、タワーが中心にピタッと吸い付くようにしました。地味な変更ですが、きれいにタワーを並べられるのは思っていた以上に気持ちが良いです。

### 3. 三色の個性的な敵たち
単調な赤い円だけでなく、特定のステージから新しい敵が登場します。
- **青色の敵 (Tank)**: 足は遅いけれど体力が非常に高く、一発では倒せません。
- **黄色の敵 (Fast)**: HPは低いものの、一瞬で通り過ぎようとする俊足の持ち主。

### 4. iPhone / iPad への完璧な適応
今回の最大の難所でした。「iPhoneだと画面端が見切れる」「iPadだと広すぎて簡単すぎる」というデバイス間の差を埋めるため、**「仮想座標系 (Logical Coordinates)」** を導入しました。
画面がどんな大きさでも、内部的には 800px の幅があるものとして計算・描画することで、どのデバイスでもまったく同じゲーム体験を提供できるようになっています。

また、UIがゲーム画面に被らないよう、上部のステータス欄を独立したヘッダーとして分離しました。iPhone SE のような小さな画面でも、PAUSEボタンや各ステータスがしっかり見えるように調整しています。

## 難易度のリバランス：数より「質」で攻める
最初はステージごとに敵の数を単純に増やしていましたが、それだとゲームが長引きすぎる傾向にありました。
そこで、**「出現数の増加は緩やかに、その代わりステータスを大幅に強化（+50%/stage）」** する方向に再調整しました。後半のステージでは、1体1体の敵がボスのような存在感になり、手に汗握る防衛が楽しめます。

## 今後の展望
一時停止ボタンも付いたことで、じっくり腰を据えて遊べるようになりました。今後はさらにタワーの種類を増やしたり、スキルなどの仕組みを導入したりしてみたいですね。

Canvasでのゲーム作り、少しずつ「命」が吹き込まれていく感じがして最高に楽しいです！

👉 [ソースコード (GitHub)](https://github.com/ariaria2021/canvas-tower-defense)
